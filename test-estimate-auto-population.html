<!DOCTYPE html>
<html>
<head>
    <title>Test Auto-Population from Levi Summary</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>ğŸ§ª Test Auto-Population from Levi Summary</h1>
    
    <div class="test-section">
        <h3>Instructions</h3>
        <p>To test the auto-population functionality:</p>
        <ol>
            <li>Go to the estimate builder page</li>
            <li>Open the browser console (F12)</li>
            <li>Paste this test code and press Enter:</li>
        </ol>
        <pre id="testCode">
// Test auto-population with sample Levi data
window.helper = {
  levisummary: {
    '××—×™×¨ ×××¤×™×™× ×™× %': '+5.5',
    '×¢×¨×š ×©"×— ×××¤×™×™× ×™×': '5500',
    '×¢×œ×™×” ×œ×›×‘×™×© %': '+7.95',
    '×¢×¨×š ×©"×— ×¢×œ×™×” ×œ×›×‘×™×©': '7036'
  }
};

// Clear existing test data
document.querySelectorAll('#featuresAdjustmentsList div[data-source="levi"]').forEach(row => row.remove());
document.querySelectorAll('#registrationAdjustmentsList div[data-source="levi"]').forEach(row => row.remove());

// Call the auto-population function
autoPopulateFromLeviSummary();

console.log('ğŸ§ª Test completed! Check the ×¢×¨×š ×”×¨×›×‘ ×”×’×•×œ××™ section for populated fields.');
        </pre>
        <button onclick="copyTestCode()">Copy Test Code</button>
    </div>

    <div class="test-section">
        <h3>Expected Results</h3>
        <p>After running the test, you should see:</p>
        <ul>
            <li><strong>Features section (×××¤×™×™× ×™×):</strong> A row with "×××¤×™×™× ×™× (××œ×•×™ ×™×¦×—×§)", plus sign, 5.5%, â‚ª5,500</li>
            <li><strong>Registration section (×¢×œ×™×” ×œ×›×‘×™×©):</strong> A row with "×¢×œ×™×” ×œ×›×‘×™×© (××œ×•×™ ×™×¦×—×§)", plus sign, 7.95%, â‚ª7,036</li>
            <li><strong>Light blue background:</strong> Both rows should have a light blue background indicating they're from Levi data</li>
            <li><strong>Console logs:</strong> Debug information showing the process</li>
        </ul>
    </div>

    <div class="test-section">
        <h3>Alternative Test (Real Data)</h3>
        <p>If you have actual Levi data, you can also test with real data by running:</p>
        <pre>
// Check what Levi data is actually available
console.log('ğŸ” Helper structure:', helper);
console.log('ğŸ” Levi summary:', helper.levisummary);
console.log('ğŸ” Levi report:', helper.levi_report);

// Force auto-population with real data
autoPopulateFromLeviSummary();
        </pre>
    </div>

    <script>
        function copyTestCode() {
            const testCode = document.getElementById('testCode').textContent;
            navigator.clipboard.writeText(testCode).then(() => {
                alert('Test code copied to clipboard!');
            });
        }
    </script>
</body>
</html>