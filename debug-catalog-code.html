<!DOCTYPE html>
<html>
<head>
    <title>Debug Catalog Code Issue</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; direction: rtl; padding: 20px; }
        .test-section { background: white; margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        table { border-collapse: collapse; width: 100%; margin: 10px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: right; }
        th { background: #f1f5f9; }
        .debug-info { background: #e6f3ff; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>ğŸ” ×‘×“×™×§×ª ×‘×¢×™×™×ª ×”×¦×’×ª ×§×•×“ ×§×˜×œ×•×’</h1>
    
    <div class="test-section">
        <h3>×‘×“×™×§×ª × ×ª×•× ×™ ×“×•×’××”:</h3>
        <div class="debug-info">
            <p><strong>×‘×¢×™×”:</strong> ×‘××¡×š ×”×¦×£ ××•×¦×’ "×©×" ×‘××§×•× ×§×•×“ ×§×˜×œ×•×’</p>
            <p><strong>×§×•×“ ×ª×¦×•×’×”:</strong> ${item.catalog_code || item.pcode || item.oem || '-'}</p>
        </div>
        
        <table id="test-table">
            <thead>
                <tr>
                    <th>×§×•×“ ×§×˜×œ×•×’ (catalog_code)</th>
                    <th>pcode</th>
                    <th>oem</th>
                    <th>×ª×™××•×¨</th>
                    <th>×ª×•×¦××” ××”×§×•×“</th>
                </tr>
            </thead>
            <tbody id="test-tbody">
            </tbody>
        </table>
        
        <button onclick="testDisplayLogic()">×‘×“×•×§ ×œ×•×’×™×§×ª ×ª×¦×•×’×”</button>
        <div id="results"></div>
    </div>

    <script>
        // Test data scenarios
        const testItems = [
            { catalog_code: '12345-ABC', pcode: null, oem: null, description: '×—×œ×§ ×¨×’×™×œ ×¢× ×§×•×“ ×§×˜×œ×•×’' },
            { catalog_code: null, pcode: '67890-DEF', oem: null, description: '×—×œ×§ ×¢× pcode' },
            { catalog_code: null, pcode: null, oem: 'OEM-123', description: '×—×œ×§ ×¢× OEM' },
            { catalog_code: '', pcode: '', oem: '', description: '×—×œ×§ ×¢× ×¢×¨×›×™× ×¨×™×§×™×' },
            { catalog_code: '×©×', pcode: null, oem: null, description: '×—×œ×§ ×¢× "×©×" ×‘×§×•×“ ×§×˜×œ×•×’' },
            { catalog_code: null, pcode: '×©×', oem: null, description: '×—×œ×§ ×¢× "×©×" ×‘-pcode' },
            { description: '×—×œ×§ ×œ×œ× ×©×“×•×ª ×§×•×“' }
        ];
        
        function testDisplayLogic() {
            const tbody = document.getElementById('test-tbody');
            const results = document.getElementById('results');
            tbody.innerHTML = '';
            
            let report = '<h4>×“×•×— ×‘×“×™×§×”:</h4><ul>';
            
            testItems.forEach((item, index) => {
                // Apply the same logic as in the floating screen
                const displayValue = item.catalog_code || item.pcode || item.oem || '-';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.catalog_code || 'null'}</td>
                    <td>${item.pcode || 'null'}</td>
                    <td>${item.oem || 'null'}</td>
                    <td>${item.description}</td>
                    <td style="background: ${displayValue === '×©×' ? '#ffebee' : '#e8f5e8'}; font-weight: bold;">${displayValue}</td>
                `;
                tbody.appendChild(row);
                
                if (displayValue === '×©×') {
                    report += `<li style="color: red;">ğŸš¨ ×¤×¨×™×˜ ${index + 1}: ××¦×™×’ "×©×" - ××§×•×¨: ${item.catalog_code ? 'catalog_code' : item.pcode ? 'pcode' : 'oem'}</li>`;
                } else {
                    report += `<li style="color: green;">âœ… ×¤×¨×™×˜ ${index + 1}: ××¦×™×’ "${displayValue}" ×›×¦×¤×•×™</li>`;
                }
            });
            
            report += '</ul>';
            results.innerHTML = report;
            
            // Check if the issue is with Hebrew text encoding
            console.log('Debug - testing Hebrew text:');
            console.log('×©× === "×©×":', '×©×' === '×©×');
            console.log('typeof "×©×":', typeof '×©×');
            console.log('char codes:', '×©×'.split('').map(c => c.charCodeAt(0)));
        }
        
        // Run test on page load
        window.addEventListener('load', testDisplayLogic);
    </script>
</body>
</html>