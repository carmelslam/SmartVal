<!DOCTYPE html>
<html>
<head>
    <title>Invoice Floating Screen Test</title>
    <script>
        // Mock window.helper for testing
        window.helper = {
            case_info: {
                supabase_case_id: 'test-case-uuid-123',
                plate: 'test-plate-456'
            },
            current_invoice: {
                case_uuid: 'test-invoice-case-uuid'
            }
        };
        
        // Mock supabase for testing
        window.supabase = {
            from: (table) => ({
                select: () => ({
                    eq: () => ({
                        order: () => ({
                            then: (callback) => callback({ data: [], error: null })
                        })
                    })
                })
            })
        };
    </script>
    <script src="invoice-details-floating.js"></script>
</head>
<body>
    <h1>Invoice Floating Screen Test</h1>
    <button onclick="testInvoiceModal()">Test Invoice Modal Direct</button>
    <button onclick="toggleInvoiceDetails()">Test toggleInvoiceDetails</button>
    <button onclick="testInvoiceFloatingButton()">Test Floating Button</button>
    
    <div style="margin-top: 20px;">
        <div class="toggle-square" onclick="toggleFloatingScreen('invoiceDetails')" 
             style="border: 1px solid black; padding: 10px; display: inline-block; cursor: pointer;">
            ğŸ§¾ ×¤×¨×˜×™ ×—×©×‘×•× ×™×•×ª
        </div>
    </div>
    
    <script>
        // Mock the toggleFloatingScreen function from final-report-builder.html
        window.toggleFloatingScreen = function(screenType) {
            console.log('ğŸ¯ toggleFloatingScreen called with:', screenType);
            
            if (screenType === 'invoiceDetails') {
                console.log('ğŸ¯ Invoice floating button clicked via toggleFloatingScreen');
                console.log('ğŸ¯ window.toggleInvoiceDetails available:', typeof window.toggleInvoiceDetails);
                if (window.toggleInvoiceDetails) {
                    window.toggleInvoiceDetails();
                } else {
                    console.log('ğŸ¯ toggleInvoiceDetails not available, showing alert');
                    alert('××¡×š ×¤×¨×˜×™ ×—×©×‘×•× ×™×•×ª ×™×”×™×” ×–××™×Ÿ ×‘×§×¨×•×‘\nInvoice details screen coming soon');
                }
            }
        };
        
        // Add click detection
        document.addEventListener('click', function(e) {
            console.log('ğŸ–±ï¸ Click detected on:', e.target);
            if (e.target.onclick) {
                console.log('ğŸ–±ï¸ Element has onclick handler');
            }
        });
        
        console.log('âœ… Test page loaded');
        console.log('âœ… toggleInvoiceDetails available:', typeof window.toggleInvoiceDetails);
        console.log('âœ… toggleFloatingScreen available:', typeof window.toggleFloatingScreen);
    </script>
</body>
</html>